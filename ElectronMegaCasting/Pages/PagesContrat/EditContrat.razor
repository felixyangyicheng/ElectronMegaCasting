@page "/editcontrat/{id}"
@page "/editcontrat"
@inherits EditContratBase
@if (EditContratModel == null)
{
    <div class="spinner"></div>
}

else
{
<EditForm Model="@EditContratModel" OnValidSubmit="HandleValidSubmit">
    <ObjectGraphDataAnnotationsValidator />
    <h3>@PageHeeaderText</h3>
    <hr />
    <div class="form-group row">
        <label for="codeContrat" class="col-sm-2 col-form-label">
            Code du contrat
        </label>
        <div class="col-sm-10">
            <InputText id="codeContrat"
                       class="form-control"
                       placeholder="Code du contrat"
                       @bind-Value="EditContratModel.CodeContrat"></InputText>
            <ValidationMessage For="@(()=>EditContratModel.CodeContrat)" />
        </div>
    </div>

    <div class="form-group row">
        <label for="debutContrat" class="col-sm-2 col-form-label">
            Début du contrat
        </label>
        <div class="col-sm-10">
            <InputDate id="debutContrat" class="form-control" placeholder="La date du début"
                       @bind-Value="EditContratModel.DebutContrat" />
        </div>
    </div>

    <div class="form-group row">
        <label for="dureContrat" class="col-sm-2 col-form-label">
            Last Name
        </label>
        <div class="col-sm-10">
            <InputNumber id="dureContrat" class="form-control" placeholder="Saisir une durée du contrat"
                         @bind-Value="EditContratModel.DureContrat" />
            <ValidationMessage For="@(()=>EditContratModel.DureContrat)" />
        </div>
    </div>



    <div class="form-group row">
        <label for="typeContrat" class="col-sm-2 col-form-label">
            Type de contrat
        </label>
        <div class="col-sm-10">
            <InputSelect id="typeContrat" @bind-Value="EditContratModel.IdTypeContrat" class="form-control">
                @foreach (var type in TypeContrats)
                    {
                    <option value="@type.Id">@type.Libelle</option>
                    }
            </InputSelect>
        </div>
    </div>

    <div class="form-group row">
        <label for="offre" class="col-sm-2 col-form-label">
            Type de contrat
        </label>
        <div class="col-sm-10">
            <InputSelect id="offre" @bind-Value="EditContratModel.IdOffre" class="form-control">
                @foreach (var offre in Offres)
                    {
                    <option value="@offre.Id">@offre.Intitule/@offre.CodeOffre</option>
                    }
            </InputSelect>
        </div>
    </div>

    <div class="form-group row">
        <label for="fichier" class="col-sm-2 col-form-label">
            Ficher PDF du contrat
        </label>
        <div class="col-sm-10">
            <InputText id="fichier"
                       class="form-control"
                       placeholder="Code du contrat"
                       @bind-Value="EditContratModel.FichierContrat"></InputText>
            <ValidationMessage For="@(()=>EditContratModel.FichierContrat)" />
        </div>
    </div>

    @*<div class="form-group row">
            <label for="deptName" class="col-sm-2 col-form-label">
                Department Name
            </label>
            <div class="col-sm-10">
                <InputText id="deptName" class="form-control" placeholder="Email"
                           @bind-Value="EditEmployeeModel.Department.DepartmentName" />
                <ValidationMessage For="@(()=>EditEmployeeModel.Department.DepartmentName)"></ValidationMessage>
            </div>
        </div>*@
    <button class="btn btn-primary" type="submit">Save</button>

    @if (EditContratModel.Id > 0)
    {
        <button class="btn btn-danger" type="button" @onclick="Delete_Click">Delete</button>

    }
</EditForm>
}